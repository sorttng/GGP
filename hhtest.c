
#include "data_macro.h"
#include "Address_of_Reg.h"
#include "math.h"
#include "EDMA_init.h"
#include "stdio.h"

//DSP为16bit宽，1260深,共1帧未循环


void  fun_test()  //EDMA中断
{
	  unsigned short int i,j;
	  unsigned short int data_head=0;
	  unsigned short int data_begin=0;
	  unsigned int temp[8];
	  unsigned int  time1,time2;
	  unsigned short int     crc_check_flag;
	  unsigned short * sumoba_pt;
	  unsigned short * ampoba_pt;
	  unsigned short int     refer_amp;
	  unsigned short   pulse_amp[112];
	  unsigned short   confi[112];
      unsigned short   correct[24];
	  unsigned short plane_ok;
	  unsigned int syndrome[112]={
              0x3935EA,0x1C9AF5,0xF1B77E,0x78DBBF,0xC397DB,0x9E31E9,0xB0E2F0,0x587178,
              0x2C38BC,0x161C5E,0x0B0E2F,0xFA7D13,0x82C48D,0xBE9842,0x5F4C21,0xD05C14,
              0x682E0A,0x341705,0xE5F186,0x72F8C3,0xC68665,0x9CB936,0x4E5C9B,0xD8D449,
              0x939020,0x49C810,0x24E408,0x127204,0x093902,0x049C81,0xFDB444,0x7EDA22,
              0x3F6D11,0xE04C8C,0x702646,0x381323,0xE3F395,0x8E03CE,0x4701E7,0xDC7AF7,
              0x91C77F,0xB719BB,0xA476D9,0xADC168,0x56E0B4,0x2B705A,0x15B82D,0xF52612,
              0x7A9309,0xC2B380,0x6159C0,0x30ACE0,0x185670,0x0C2B38,0x06159C,0x030ACE,
              0x018567,0xFF38B7,0x80665F,0xBFC92B,0xA01E91,0xAFF54C,0x57FAA6,0x2BFD53,
              0xEA04AD,0x8AF852,0x457C29,0xDD4410,0x6EA208,0x375104,0x1BA882,0x0DD441,
              0xF91024,0x7C8812,0x3E4409,0xE0D800,0x706C00,0x383600,0x1C1B00,0x0E0D80,
              0x0706C0,0x038360,0x01C1B0,0x00E0D8,0x00706C,0x003836,0x001C1B,0xFFF409,
              0x800000,0x400000,0x200000,0x100000,0x080000,0x040000,0x020000,0x010000,
              0x008000,0x004000,0x002000,0x001000,0x000800,0x000400,0x000200,0x000100,
              0x000080,0x000040,0x000020,0x000010,0x000008,0x000004,0x000002,0x000001
              };
#if 1
      unsigned short data_fifo[1260]=
   {
0x0000,0x0000,0x0000,0x0000,0x0000,0x5A5A,0x5A5A,0xFFFF,
0xFFFF,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
/*0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,*///
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,
/*
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,//*/
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000};//correct
#endif
#if 0
   unsigned short data_fifo[1260]=
   {
0x0000,0x0000,0x0000,0x0000,0x0000,0x5A5A,0x5A5A,0xFFFF,
0xFFFF,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,
/*0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,*/
0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,//
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
/*0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,*///
0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,//
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,  //
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,
0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,
0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,0x0557,0x09DF,
0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,0x0F36,0x0F36,
0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,0x01E0,
0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x01E0,0x0557,
0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0F36,
0x0F36,0x0F36,0x0F36,0x0F36,0x0D56,0x09DF,0x0557,0x01E0,
0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,
0x0557,0x01E0,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,0x09DF,0x0557,
0x01E0,0x0000,0x01E0,0x0557,0x09DF,0x0D56,0x0F36,0x0D56,
0x09DF,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,
0x0000,0x0000,0x0000,0x0000};
#endif
#if 0 
	  if(dma_counter==0)
	  {
	      data_fifo= first_fifo_1;
	      dma_counter=1;
	      *EVENT_DST4=(int)first_fifo_2;
	  }
	  else
	  {
	      data_fifo= first_fifo_2;
	      dma_counter=0;
		  *EVENT_DST4=(int)first_fifo_1;
	  }
      *(CIPRL)=0x10;//清除DMA4中断
      *(ECRL)=0x10;//清除DMA4中断
#endif
	  time1=CLK_gethtime();
      for(i=2;i<10;i++)
      {
	         if((data_fifo[i]==0x5a5a)&&(data_fifo[i+1]==0x5a5a)&&
		    	 (data_fifo[i+2]==0xffff)&&(data_fifo[i+3]==0xffff))
	         {
		          data_head=1;
				  data_begin=i+4;
				  break;
	         }
      }//for
      if(data_head==1)
      {
	       temp[0]=data_fifo[data_begin+2]+data_fifo[data_begin+12]
		           +data_fifo[data_begin+37]+data_fifo[data_begin+47]
				   +data_fifo[data_begin+82];
		   temp[1]=data_fifo[data_begin+7]+data_fifo[data_begin+17]
		           +data_fifo[data_begin+42]+data_fifo[data_begin+52]
				   +data_fifo[data_begin+87];
		   if(temp[1]>=temp[0])
		   {
		      data_begin=data_begin+3;
		   }
		   else
		   {
		      data_begin=data_begin+2;
		   }
	       sumoba_pt=data_fifo+data_begin;//ADS-B报头起始位置指针 
		   ampoba_pt=data_fifo+data_begin+80;//ADS-B数据起始位置指针
		   refer_amp=com_refer(sumoba_pt);//计算幅度的参考值

		   //此功率检测适用于对数检波后，线性解调制后可以简化为用中间4个样点值直接平均得到（需要验证）
		   // refer_amp1=com_refer1(sumoba_pt);
		   code_confi(refer_amp,ampoba_pt,pulse_amp,confi);//计算代码位和置信度
	
	       //type_value=pulse_amp[32]*16+pulse_amp[33]*8+pulse_amp[34]*4+pulse_amp[35]*2+pulse_amp[36];
		   crc_check_flag=crc_check(pulse_amp,correct);//CRC校验
		   if(crc_check_flag==0)  	  
		   {
		     	plane_ok=0;//此变量为0表示飞机ADS-B广播信息接收正确
		   }
		   else
		   {
		   		plane_ok=err_corr(confi,pulse_amp,correct,syndrome);//纠错
		   }
 		   if(plane_ok==0)
		   {
		        //此处开始进行MCBSP的串口传输
				buildpacket(pulse_amp);
       	   }
   	   }
	   time2=CLK_gethtime();
	   time1=time2-time1;
	   *(GPVAL)=*(GPVAL)&0xfffffdff;  //GPIO
}
/*****************************************/	